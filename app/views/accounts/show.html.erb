<div class="container mt-4">
  <div class="row align-items-center">

    <!-- Profile Image -->
    <div class="col-md-4 text-center mb-3">
      <% image_url = @account.image.attached? ? url_for(@account.image) : "default.png" %>
      <%= image_tag image_url, class: "rounded-circle shadow", style: "width:200px; height:200px; object-fit:cover;" %>
    </div>

    <!-- Profile Info -->
    <div class="col-md-8">
      <div class="d-flex align-items-center mb-2 flex-wrap">
        <h2 class="me-3 fw-bold"><%= @account.username %></h2>

        <% if current_account == @account %>
          <%= link_to "Edit Profile", edit_account_registration_path, class: "btn btn-sm btn-outline-dark ms-2 mt-2 mt-md-0" %>
        <% end %>
      </div>

      <div class="mb-3 d-flex flex-wrap gap-3">
        <span><strong><%= @account.posts.count %></strong> Posts</span>
        <span><strong id="followers_count"><%= @account.followers.count %></strong> Followers</span>
        <span><strong id="following_count"><%= @account.following.count %></strong> Following</span>
      </div>

      <p class="fw-bold mb-1"><%= @account.full_name %></p>
      <p class="mb-1"><%= @account.description %></p>
      <% if @account.website.present? %>
        <p>
          <a href="<%= @account.website %>" target="_blank" class="text-primary">
            <%= @account.website %>
          </a>
        </p>
      <% end %>
    </div>
  </div>

  <hr class="my-4">

  <!-- User Posts -->
  <div class="row">
    <% @posts.each do |post| %>
      <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
        <% if post.image.attached? %>
          <div class="card shadow-sm border-0 h-100 position-relative">
            <div class="card-body p-2 d-flex justify-content-between align-items-center">
              <span class="fw-bold small"><%= post.account.username %></span>

              <% if current_account == post.account %>
                <%= link_to post_path(post), method: :delete, data: { turbo_confirm: "Are you sure?" }, class: "btn btn-sm btn-outline-danger p-1" do %>
                  <i class="fas fa-trash"></i>
                <% end %>
              <% end %>
            </div>

            <div class="post-image-container">
              <%= image_tag url_for(post.image), class: "card-img-bottom", style: "width:100%; height:250px; object-fit:cover;" %>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
